---
import { Image } from 'astro:assets';
import { ImageMetadata } from 'astro';
import { blurStyle } from '@support/image';

interface FsPathImage extends ImageMetadata {
  fsPath?: string;
}

const props = Astro.props;

const image = props.src as FsPathImage;
const showBlur = !props.disableBlur;
const blurCSS = image.fsPath && showBlur ? await blurStyle(image.fsPath) : {};
---

<Image {...props} style={blurCSS} inferSize={true} />
